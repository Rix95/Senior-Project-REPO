#!/bin/sh

# Read the commit message from the file
commit_msg_file=$1
commit_msg=$(cat "$commit_msg_file")

# Define the regex pattern for the required format
regex="^SP-[0-9]{2}: .+"

# Check if the commit message matches the pattern
if ! echo "$commit_msg" | grep -Eq "$regex"; then
  echo "ERROR: Commit message does not follow the required format."
  echo "The correct format is: 'SP-XX: (title)', where XX is a two-digit number."
  echo "Example: 'SP-01: Implement user authentication'"
  exit 1  # Reject the commit
fi

exit 0  # Accept the commit